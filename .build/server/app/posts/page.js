(()=>{var e={};e.id=991,e.ids=[991],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},57778:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),t(17184),t(27612),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["posts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17184)),"/home/ubuntu/gsautogbp/app/posts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,27612)),"/home/ubuntu/gsautogbp/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/gsautogbp/app/posts/page.tsx"],u="/posts/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/posts/page",pathname:"/posts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},40992:(e,s,t)=>{Promise.resolve().then(t.bind(t,90085)),Promise.resolve().then(t.bind(t,78864))},78864:(e,s,t)=>{"use strict";t.d(s,{default:()=>ei});var a=t(10326),r=t(17577),l=t(4891),i=t(61584),n=t(48998),d=t(30361),o=t(36283),c=t(83855),u=t(62881);let p=(0,u.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var x=t(59734),h=t(37358),m=t(77506);let f=(0,u.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var g=t(69508);let j=(0,u.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var y=t(90772),v=t(54432),N=t(33071),b=t(567),w=t(34474),k=t(93095),P=t(48051),D=t(98958),S=t(82561),E=t(34214),A="AlertDialog",[Z,C]=(0,k.b)(A,[D.p8]),q=(0,D.p8)(),z=e=>{let{__scopeAlertDialog:s,...t}=e,r=q(s);return(0,a.jsx)(D.fC,{...r,...t,modal:!0})};z.displayName=A;var R=r.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...r}=e,l=q(t);return(0,a.jsx)(D.xz,{...l,...r,ref:s})});R.displayName="AlertDialogTrigger";var M=e=>{let{__scopeAlertDialog:s,...t}=e,r=q(s);return(0,a.jsx)(D.h_,{...r,...t})};M.displayName="AlertDialogPortal";var T=r.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...r}=e,l=q(t);return(0,a.jsx)(D.aV,{...l,...r,ref:s})});T.displayName="AlertDialogOverlay";var _="AlertDialogContent",[F,L]=Z(_),B=r.forwardRef((e,s)=>{let{__scopeAlertDialog:t,children:l,...i}=e,n=q(t),d=r.useRef(null),o=(0,P.e)(s,d),c=r.useRef(null);return(0,a.jsx)(D.jm,{contentName:_,titleName:O,docsSlug:"alert-dialog",children:(0,a.jsx)(F,{scope:t,cancelRef:c,children:(0,a.jsxs)(D.VY,{role:"alertdialog",...n,...i,ref:o,onOpenAutoFocus:(0,S.M)(i.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(E.A4,{children:l}),(0,a.jsx)(Y,{contentRef:d})]})})})});B.displayName=_;var O="AlertDialogTitle",I=r.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...r}=e,l=q(t);return(0,a.jsx)(D.Dx,{...l,...r,ref:s})});I.displayName=O;var G="AlertDialogDescription",H=r.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...r}=e,l=q(t);return(0,a.jsx)(D.dk,{...l,...r,ref:s})});H.displayName=G;var V=r.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...r}=e,l=q(t);return(0,a.jsx)(D.x8,{...l,...r,ref:s})});V.displayName="AlertDialogAction";var Q="AlertDialogCancel",U=r.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...r}=e,{cancelRef:l}=L(Q,t),i=q(t),n=(0,P.e)(s,l);return(0,a.jsx)(D.x8,{...i,...r,ref:n})});U.displayName=Q;var Y=({contentRef:e})=>{let s=`\`${_}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${_}\` by passing a \`${G}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${_}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,e]),null},$=t(77863);let J=r.forwardRef(({className:e,...s},t)=>a.jsx(T,{className:(0,$.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));J.displayName=T.displayName;let X=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(M,{children:[a.jsx(J,{}),a.jsx(B,{ref:t,className:(0,$.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));X.displayName=B.displayName;let K=({className:e,...s})=>a.jsx("div",{className:(0,$.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});K.displayName="AlertDialogHeader";let W=({className:e,...s})=>a.jsx("div",{className:(0,$.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});W.displayName="AlertDialogFooter";let ee=r.forwardRef(({className:e,...s},t)=>a.jsx(I,{ref:t,className:(0,$.cn)("text-lg font-semibold",e),...s}));ee.displayName=I.displayName;let es=r.forwardRef(({className:e,...s},t)=>a.jsx(H,{ref:t,className:(0,$.cn)("text-sm text-muted-foreground",e),...s}));es.displayName=H.displayName;let et=r.forwardRef(({className:e,...s},t)=>a.jsx(V,{ref:t,className:(0,$.cn)((0,y.d)(),e),...s}));et.displayName=V.displayName;let ea=r.forwardRef(({className:e,...s},t)=>a.jsx(U,{ref:t,className:(0,$.cn)((0,y.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));ea.displayName=U.displayName;var er=t(94215),el=t(90434);function ei(){let[e,s]=(0,r.useState)([]),[t,u]=(0,r.useState)([]),[k,P]=(0,r.useState)(!0),[D,S]=(0,r.useState)(""),[E,A]=(0,r.useState)("all"),[Z,C]=(0,r.useState)("all"),[q,M]=(0,r.useState)(new Set),{toast:T}=(0,er.pm)(),_=async t=>{try{if((await fetch(`/api/posts/${t}`,{method:"DELETE"})).ok)s(e.filter(e=>e.id!==t)),T({title:"Success",description:"Post deleted successfully"});else throw Error("Failed to delete post")}catch(e){console.error("Error deleting post:",e),T({title:"Error",description:"Failed to delete post",variant:"destructive"})}},F=async e=>{M(s=>new Set(s).add(e));try{let t=await fetch("/api/posts/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e})});if(t.ok)s(s=>s.map(s=>s.id===e?{...s,status:"PUBLISHED"}:s)),T({title:"Success",description:"Post published to Google Business Profile successfully"});else{let e=await t.json();throw Error(e.error||"Failed to publish post")}}catch(e){console.error("Error publishing post:",e),T({title:"Error",description:e.message||"Failed to publish post to Google Business Profile",variant:"destructive"})}finally{M(s=>{let t=new Set(s);return t.delete(e),t})}},L=e=>{switch(e){case"DRAFT":return a.jsx(i.Z,{className:"h-4 w-4"});case"SCHEDULED":return a.jsx(n.Z,{className:"h-4 w-4"});case"PUBLISHED":return a.jsx(d.Z,{className:"h-4 w-4"});default:return a.jsx(o.Z,{className:"h-4 w-4"})}},B=e=>{switch(e){case"DRAFT":default:return"bg-gray-100 text-gray-800";case"SCHEDULED":return"bg-blue-100 text-blue-800";case"PUBLISHED":return"bg-green-100 text-green-800"}},O=e=>{switch(e){case"UPDATE":return"bg-purple-100 text-purple-800";case"EVENT":return"bg-orange-100 text-orange-800";case"OFFER":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return k?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Posts"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your Google Business Profile posts"})]}),a.jsx(y.z,{asChild:!0,size:"lg",className:"gold-shadow",children:(0,a.jsxs)(el.default,{href:"/posts/new",children:[a.jsx(c.Z,{className:"mr-2 h-5 w-5"}),"Create Post"]})})]})}),a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:a.jsx(N.Zb,{className:"card-shadow",children:a.jsx(N.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(p,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(v.I,{placeholder:"Search posts...",value:D,onChange:e=>S(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)(w.Ph,{value:E,onValueChange:A,children:[a.jsx(w.i4,{className:"w-full sm:w-32",children:a.jsx(w.ki,{placeholder:"Status"})}),(0,a.jsxs)(w.Bw,{children:[a.jsx(w.Ql,{value:"all",children:"All Status"}),a.jsx(w.Ql,{value:"draft",children:"Draft"}),a.jsx(w.Ql,{value:"scheduled",children:"Scheduled"}),a.jsx(w.Ql,{value:"published",children:"Published"})]})]}),(0,a.jsxs)(w.Ph,{value:Z,onValueChange:C,children:[a.jsx(w.i4,{className:"w-full sm:w-32",children:a.jsx(w.ki,{placeholder:"Type"})}),(0,a.jsxs)(w.Bw,{children:[a.jsx(w.Ql,{value:"all",children:"All Types"}),a.jsx(w.Ql,{value:"update",children:"Update"}),a.jsx(w.Ql,{value:"event",children:"Event"}),a.jsx(w.Ql,{value:"offer",children:"Offer"})]})]})]})})})}),a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:t.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,s)=>a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:(0,a.jsxs)(N.Zb,{className:"card-shadow hover:card-shadow-hover transition-shadow h-full",children:[(0,a.jsxs)(N.Ol,{children:[a.jsx("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(N.ll,{className:"text-lg line-clamp-2",children:e.title}),a.jsx(N.SZ,{className:"mt-2 line-clamp-3",children:e.content})]})}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,a.jsxs)(b.C,{className:B(e.status),children:[L(e.status),a.jsx("span",{className:"ml-1",children:e.status})]}),a.jsx(b.C,{variant:"outline",className:O(e.type),children:e.type})]}),e.business&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3 text-sm text-muted-foreground",children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:e.business.name}),e.business.isVerified&&a.jsx(d.Z,{className:"h-4 w-4 text-green-500"})]})]}),a.jsx(N.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:e.scheduledAt?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(h.Z,{className:"h-4 w-4"}),"Scheduled: ",new Date(e.scheduledAt).toLocaleDateString()]}):(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(n.Z,{className:"h-4 w-4"}),"Created: ",new Date(e.createdAt).toLocaleDateString()]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[e.business&&"PUBLISHED"!==e.status&&a.jsx(y.z,{onClick:()=>F(e.id),disabled:q.has(e.id),size:"sm",className:"w-full",children:q.has(e.id)?(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Publishing..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(f,{className:"h-4 w-4 mr-2"}),"Publish to Google"]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(y.z,{asChild:!0,variant:"outline",size:"sm",className:"flex-1",children:(0,a.jsxs)(el.default,{href:`/posts/${e.id}/edit`,children:[a.jsx(g.Z,{className:"h-4 w-4 mr-1"}),"Edit"]})}),(0,a.jsxs)(z,{children:[a.jsx(R,{asChild:!0,children:a.jsx(y.z,{variant:"outline",size:"sm",className:"px-3",children:a.jsx(j,{className:"h-4 w-4"})})}),(0,a.jsxs)(X,{children:[(0,a.jsxs)(K,{children:[a.jsx(ee,{children:"Are you sure?"}),a.jsx(es,{children:"This action cannot be undone. This will permanently delete the post."})]}),(0,a.jsxs)(W,{children:[a.jsx(ea,{children:"Cancel"}),a.jsx(et,{onClick:()=>_(e.id),children:"Delete"})]})]})]})]})]})]})})]})},e.id))}):a.jsx(N.Zb,{className:"card-shadow",children:(0,a.jsxs)(N.aY,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(o.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No posts found"}),a.jsx("p",{className:"text-muted-foreground text-center mb-6",children:D||"all"!==E||"all"!==Z?"No posts match your current filters":"Get started by creating your first post"}),a.jsx(y.z,{asChild:!0,children:(0,a.jsxs)(el.default,{href:"/posts/new",children:[a.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Create Your First Post"]})})]})})})]})}},54432:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(10326),r=t(17577),l=t(77863);let i=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Input"},59734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},30361:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},77506:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},61584:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]])},17184:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(19510),r=t(58585),l=t(75571),i=t(90455),n=t(40732);let d=(0,t(68570).createProxy)(String.raw`/home/ubuntu/gsautogbp/components/posts/posts-list.tsx#default`);async function o(){return await (0,l.getServerSession)((0,i.b)())||(0,r.redirect)("/login"),a.jsx(n.Z,{children:a.jsx(d,{})})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,776,83,283,404,129,964,970,847,583,834],()=>t(57778));module.exports=a})();